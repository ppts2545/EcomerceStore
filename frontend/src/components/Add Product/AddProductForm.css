/* =====================================
   Global Theme Tokens (Light/Dark)
===================================== */
:root {
  --primary: #1677ff;
  --primary-600: #0f6ae6;
  --primary-700: #0a5bcc;
  --accent: #22c55e;
  --danger: #ef4444;
  --warning: #f59e0b;

  --bg: #ffffff;
  --bg-elev: #f9fafb;
  --bg-alt: #f3f4f6;

  --text: #111827;
  --text-muted: #6b7280;

  --border: #e5e7eb;
  --ring: 0 0 0 3px rgba(22, 119, 255, 0.18);

  --radius: 12px;
  --radius-sm: 8px;
  --shadow-sm: 0 2px 6px rgba(0,0,0,.08);
  --shadow-md: 0 8px 24px rgba(0,0,0,.12);

  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 24px;

  --transition: 220ms cubic-bezier(.2,.8,.2,1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b1220;
    --bg-elev: #0f172a;
    --bg-alt: #0b1324;
    --text: #e5e7eb;
    --text-muted: #94a3b8;
    --border: #1f2937;
    --ring: 0 0 0 3px rgba(22, 119, 255, 0.35);
    --shadow-sm: 0 2px 8px rgba(0,0,0,.25);
    --shadow-md: 0 18px 40px rgba(0,0,0,.35);
  }
}

:root { color-scheme: light dark; }

/* Improve base typography */
.add-product-modal, .product-form { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; line-height: 1.5; }

/* =====================================
   Overlay & Modal
===================================== */
.add-product-overlay {
  position: fixed; inset: 0; z-index: 1200;
  display: grid; place-items: center;
  background: color-mix(in oklab, black 60%, transparent);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  animation: fadeIn 240ms ease-out;
}

.add-product-modal {
  width: min(880px, 92vw);
  max-height: 90vh; overflow: hidden;
  background: linear-gradient(180deg, var(--bg) 0%, color-mix(in oklab, var(--bg-elev) 60%, transparent) 100%);
  border: 1px solid var(--border);
  border-radius: 16px; box-shadow: var(--shadow-md);
  animation: slideUp 260ms ease-out;
  display: grid; grid-template-rows: auto 1fr auto;
}

/* =====================================
   Header
===================================== */
.modal-header { padding: var(--space-5) var(--space-5) var(--space-3); display: flex; align-items: center; justify-content: space-between; gap: var(--space-2); border-bottom: 1px solid var(--border); }
.modal-header h2 { font-size: clamp(1.1rem, 2.4vw, 1.6rem); font-weight: 700; color: var(--text); letter-spacing: .2px; }
.close-button { border: 1px solid var(--border); background: var(--bg-elev); width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; color: var(--text-muted); cursor: pointer; transition: transform var(--transition), background var(--transition), color var(--transition), border-color var(--transition); }
.close-button:hover { color: var(--text); background: var(--bg-alt); transform: translateY(-1px); }
.close-button:focus-visible { outline: none; box-shadow: var(--ring); }

/* =====================================
   Form Body
===================================== */
.product-form { padding: var(--space-4) var(--space-5); overflow: auto; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); }
.form-group { display: flex; flex-direction: column; gap: 8px; }
.form-group label { font-size: .95rem; font-weight: 600; color: var(--text); }

input, textarea, select {
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  padding: 12px 14px; font-size: .95rem;
  background: var(--bg-elev); color: var(--text);
  transition: border-color var(--transition), box-shadow var(--transition), background var(--transition);
}
input::placeholder, textarea::placeholder { color: var(--text-muted); }
input:focus, textarea:focus, select:focus { border-color: color-mix(in oklab, var(--primary) 95%, white 5%); box-shadow: var(--ring); outline: none; background: var(--bg); }
input[disabled], textarea[disabled], select[disabled] { opacity: .7; cursor: not-allowed; }

.error { border-color: var(--danger)!important; box-shadow: 0 0 0 3px color-mix(in oklab, var(--danger) 25%, transparent) !important; }
.error-text { color: var(--danger); font-size: .85rem; }

/* Help rows under inputs */
.form-hint { font-size: .8rem; color: var(--text-muted); }

/* =====================================
   Category Chips
===================================== */
.category-checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 4px; }
.category-checkbox-label {
  display: inline-flex; align-items: center; gap: 10px;
  background: var(--bg-elev);
  border: 1.5px solid var(--border);
  border-radius: 999px; /* pill */
  padding: 8px 14px; font-size: .92rem; font-weight: 600; color: var(--text);
  cursor: pointer; user-select: none;
  transition: transform var(--transition), border-color var(--transition), background var(--transition), box-shadow var(--transition);
  box-shadow: var(--shadow-sm);
}
.category-checkbox-label:hover { border-color: color-mix(in oklab, var(--primary) 30%, var(--border)); background: color-mix(in oklab, var(--bg-elev) 88%, var(--primary) 12%); transform: translateY(-1px); }
.category-checkbox-label input[type="checkbox"] { accent-color: var(--primary); width: 18px; height: 18px; cursor: pointer; }
.category-checkbox-label:has(input[type="checkbox"]:checked) { border-color: var(--primary); background: color-mix(in oklab, var(--primary) 14%, var(--bg-elev)); color: color-mix(in oklab, var(--text) 80%, white); box-shadow: 0 6px 18px color-mix(in oklab, var(--primary) 18%, transparent); }

/* Fallback when :has is not supported */
.category-checkbox-label input[type="checkbox"]:checked + .category-checkbox-icon { font-weight: 800; }

/* =====================================
   Media Manager
===================================== */
.media-manager { background: var(--bg-elev); padding: var(--space-4); border-radius: var(--radius); border: 1px solid var(--border); box-shadow: var(--shadow-sm); }
.media-input-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
.media-type-select { min-width: 120px; }
.add-media-btn { background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%); color: #fff; border: 0; padding: 10px 16px; border-radius: 10px; cursor: pointer; font-weight: 700; letter-spacing: .2px; box-shadow: 0 6px 16px color-mix(in oklab, var(--primary) 25%, transparent); transition: transform var(--transition), box-shadow var(--transition), filter var(--transition); }
.add-media-btn:hover { transform: translateY(-1px); filter: brightness(1.03); box-shadow: 0 10px 24px color-mix(in oklab, var(--primary) 35%, transparent); }
.add-media-btn:active { transform: translateY(0); }
.add-media-btn:disabled { opacity: .6; cursor: not-allowed; box-shadow: none; }

/* Media list becomes a responsive gallery */
.media-items { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 12px; margin-top: 12px; }
.media-item { display: grid; grid-template-columns: 88px 1fr auto; align-items: center; gap: 14px; border: 1px solid var(--border); border-radius: 12px; padding: 10px; background: var(--bg); transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition); }
.media-item:hover { transform: translateY(-1px); border-color: color-mix(in oklab, var(--primary) 28%, var(--border)); box-shadow: var(--shadow-sm); }

.media-preview { position: relative; width: 88px; height: 88px; border-radius: 10px; overflow: hidden; background: var(--bg-alt); border: 1px solid var(--border); }
.media-preview img, .media-preview video { width: 100%; height: 100%; object-fit: cover; display: block; }
.video-overlay { position: absolute; inset: 0; display: grid; place-items: center; font-size: 1.2rem; background: rgba(0,0,0,.35); color: #fff; }
.media-info { min-width: 0; }
.media-info .media-type { display: inline-block; font-weight: 700; color: var(--text); margin-bottom: 4px; }
.media-info .media-url { display: block; color: var(--text-muted); font-size: .85rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.remove-media-btn { border: 1px solid var(--border); background: var(--bg-elev); width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; font-size: 1.1rem; color: var(--text-muted); cursor: pointer; transition: transform var(--transition), color var(--transition), background var(--transition), border-color var(--transition); }
.remove-media-btn:hover { color: var(--danger); background: color-mix(in oklab, var(--bg-elev) 85%, var(--danger) 15%); border-color: color-mix(in oklab, var(--danger) 35%, var(--border)); transform: translateY(-1px); }
.remove-media-btn:disabled { opacity: .6; cursor: not-allowed; }

.media-limit-warning { margin-top: 8px; color: var(--warning); font-weight: 600; }

/* =====================================
   Actions (Sticky footer)
===================================== */
.form-actions {
  position: sticky; bottom: 0;
  display: flex; justify-content: flex-end; gap: 12px;
  padding: var(--space-4) var(--space-5);
  background: linear-gradient(180deg, transparent 0%, color-mix(in oklab, var(--bg) 92%, transparent) 40%  , var(--bg) 100%);
  border-top: 1px solid var(--border);
}

.cancel-button, .submit-button { padding: 12px 18px; border-radius: 12px; font-weight: 700; cursor: pointer; transition: transform var(--transition), box-shadow var(--transition), filter var(--transition); border: none; }
.cancel-button { background: var(--bg-elev); color: var(--text); border: 1px solid var(--border); }
.cancel-button:hover { transform: translateY(-1px); }

.submit-button { background: linear-gradient(180deg, var(--primary) 0%, var(--primary-700) 100%); color: #fff; box-shadow: 0 10px 28px color-mix(in oklab, var(--primary) 28%, transparent); }
.submit-button:hover { transform: translateY(-1px); filter: brightness(1.03); }
.submit-button:disabled { opacity: .65; cursor: not-allowed; box-shadow: none; }

.loading-spinner { width: 16px; height: 16px; border: 2px solid #fff; border-top: 2px solid transparent; border-radius: 50%; display: inline-block; margin-right: 8px; animation: spin .85s linear infinite; vertical-align: -3px; }

/* =====================================
   Animations & Reduced Motion
===================================== */
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* =====================================
   Responsive
===================================== */
@media (max-width: 860px) {
  .form-grid { grid-template-columns: 1fr; }
  .modal-header { padding: var(--space-4) var(--space-4) var(--space-3); }
  .product-form { padding: var(--space-3) var(--space-4); }
  .form-actions { padding: var(--space-3) var(--space-4); }
}

@media (max-width: 420px) {
  .category-checkbox-group { gap: 8px; }
  .category-checkbox-label { padding: 7px 12px; font-size: .88rem; }
  .add-media-btn { width: 100%; }
}
