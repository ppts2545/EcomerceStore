:root{
  --blue-700:#1d4ed8;
  --blue-600:#2563eb;
  --sky-500:#0ea5e9;
  --bg:#f6f7fb;
  --white:#fff;
  --text:#111827;
  --muted:#6b7280;
  --line:#e5e7eb;
  --danger:#dc2626;
  --shadow:0 10px 30px rgba(0,0,0,.12);
}

/* Overlay */
.cart-overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.42);
  backdrop-filter: blur(2px);
  z-index:1000;
  display:flex; justify-content:flex-end; align-items:stretch;
}

/* Sidebar */
.cart-sidebar{
  width:min(520px, 100vw);
  background:var(--white);
  display:flex; flex-direction:column;
  box-shadow:var(--shadow);
  animation:slideIn .18s ease-out;
}
@keyframes slideIn{
  from{ transform:translateX(12px); opacity:.4 }
  to{ transform:translateX(0); opacity:1 }
}

/* Header */
.cart-header{
  padding:16px 18px;
  border-bottom:1px solid var(--line);
  display:flex; align-items:center; justify-content:space-between;
}
.cart-title h2{ margin:0; font-size:18px; font-weight:800; color:var(--text); }
.cart-user{ margin-left:10px; font-size:13px; color:var(--muted); }
.cart-close{ border:none; background:transparent; font-size:28px; line-height:1; cursor:pointer; color:#374151; }
.cart-close:hover{ color:#111827 }

/* Content */
.cart-content{ flex:1; overflow:auto; background:var(--bg); padding:12px 12px 0; }

/* Empty state */
.cart-empty{
  background:var(--white);
  margin:12px; padding:32px; border:1px solid var(--line); border-radius:12px;
  text-align:center;
}
.empty-icon{ font-size:44px; margin-bottom:6px }
.cart-empty h3{ margin:6px 0; font-weight:800; color:var(--text); }
.cart-empty p{ margin:0 0 12px 0; color:var(--muted) }
.continue-shopping{
  border:none; background:linear-gradient(135deg, var(--blue-700), var(--sky-500));
  color:#fff; padding:10px 16px; border-radius:999px; cursor:pointer; font-weight:700;
}

/* Select all row */
.select-all-row{
  display:flex; align-items:center; justify-content:space-between;
  margin:12px; padding:10px 12px; border-radius:10px; background:#fff; border:1px solid var(--line);
}
.clear-all{ border:none; background:transparent; color:var(--danger); font-weight:700; cursor:pointer; }

/* Checkbox */
.checkbox{ display:inline-flex; align-items:center; gap:10px; cursor:pointer; user-select:none; font-weight:600; color:#374151; }
.checkbox input{ display:none; }
.checkbox .checkmark{
  width:18px; height:18px; border-radius:4px; border:2px solid var(--line); display:inline-block;
  position:relative; transition:border-color .15s, background .15s;
}
.checkbox.pill .checkmark{ border-radius:999px; width:20px; height:20px; }
.checkbox.square .checkmark{ width:18px; height:18px; border-radius:4px; }
.checkbox input:checked + .checkmark{
  background:linear-gradient(135deg, var(--blue-700), var(--sky-500));
  border-color:transparent;
}
.checkbox input:checked + .checkmark::after{
  content:""; position:absolute; left:50%; top:50%; width:6px; height:10px;
  border:2px solid #fff; border-top:none; border-left:none; transform:translate(-50%,-60%) rotate(45deg);
}

/* Items list */
.cart-items{ display:flex; flex-direction:column; gap:10px; padding:0 12px 12px; }

.cart-item{
  display:grid; grid-template-columns: 24px 72px 1fr auto; gap:12px;
  background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px;
  align-items:center; position:relative;
}
.cart-item.selected{ border-color: rgba(37,99,235,.35); box-shadow:0 4px 14px rgba(37,99,235,.08); }
.cart-item.out{ opacity:.72; }

/* image */
.item-image{ position:relative; width:72px; height:72px; overflow:hidden; border-radius:10px; }
.item-image img{ width:100%; height:100%; object-fit:cover; display:block; }
.badge-out{ position:absolute; right:6px; top:6px; background:#111827cc; color:#fff; font-size:12px; padding:2px 6px; border-radius:6px; }

/* info */
.item-info{ display:flex; flex-direction:column; gap:6px; }
.item-name{
  font-weight:700; color:#111827; line-height:1.2;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.item-desc{
  color:var(--muted); font-size:13px;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.row.meta{ display:flex; justify-content:space-between; align-items:center; font-size:13px; color:#334155; }
.unit-price{ font-weight:700; color:var(--blue-700); }
.stock{ color:#6b7280; }

/* actions (qty + total) */
.row.actions{
  display:flex; justify-content:space-between; align-items:center;
  margin-top:4px; gap:12px;
  /* ทำให้ส่วนนี้สูงเท่ากันเสมอ */
  min-height:40px;
}
.qty{
  display:inline-flex; align-items:center; gap:8px;
  height:40px;
}
.step{
  width:40px; height:40px; border-radius:10px;
  border:1px solid var(--line); background:#fff; cursor:pointer;
  font-size:20px; line-height:1; display:grid; place-items:center;
}
.step:disabled{ opacity:.5; cursor:not-allowed; }
.value{ width:40px; height:40px; display:grid; place-items:center; text-align:center; font-weight:700; border:1px solid var(--line); border-radius:10px; background:#fff; }
.rowtotal{ font-weight:800; color:#0f172a; height:40px; display:grid; place-items:center; min-width:72px; }

/* remove button (ถังขยะ) */
.remove{ border:none; background:transparent; cursor:pointer; font-size:18px; padding:6px; color:#6b7280; }
.remove:hover{ color:var(--danger); }

/* Loading */
.cart-loading{ display:grid; place-items:center; padding:40px; }
.loading-spinner{
  width:28px; height:28px; border-radius:50%;
  border:3px solid #e5e7eb; border-top-color:var(--blue-600); animation:spin 1s linear infinite; margin-bottom:10px;
}
@keyframes spin{ to{ transform:rotate(360deg) } }

/* Footer / Summary */
.cart-footer{
  border-top:1px solid var(--line);
  padding:10px 12px; background:#fff;
  position:sticky; bottom:0; left:0; right:0;
}
.summary{ display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:8px; }
.sum-left{ color:#374151; font-size:13px; }
.sum-right{ text-align:right; }
.sum-title{ color:#6b7280; font-size:12px; }
.sum-total{ font-size:18px; font-weight:900; color:#0f172a; }
.checkout{
  width:100%; border:none; cursor:pointer; border-radius:12px; padding:12px 16px; font-weight:800; color:#fff;
  background:linear-gradient(135deg, var(--blue-700), var(--sky-500));
  display:flex; align-items:center; justify-content:center; gap:10px;
}
.checkout:disabled{ opacity:.6; cursor:not-allowed; }
.checkout .pill{
  background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.35);
  padding:4px 10px; border-radius:999px; font-weight:800;
}

/* Responsive */
@media (max-width:480px){
  .cart-sidebar{ width:100vw; }
  .cart-item{ grid-template-columns: 22px 64px 1fr auto; }
  .item-image{ width:64px; height:64px; }
}